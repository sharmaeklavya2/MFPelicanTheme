{% extends "base.html" %}

{% block title %}{{ SITENAME }} - {{ article.title }}{% endblock %}

{% block metadata %}
    {% if article.summary or DESCRIPTION %}
<meta name="description" content="{{ article.summary|striptags|default(DESCRIPTION, true) }}" />
    {% endif %}
    {% if article.tags %}
<meta name="keywords" content="{{ article.tags|join(',') }}" />
    {% endif %}
{% endblock %}

{% block head %}{{ super() }}{% if article.extracss %}
    {% for cssfile in article.extracss.split(',') %}
        {% if cssfile.strip().startswith('http') %}
<link rel="stylesheet" href="{{cssfile.strip()}}" />
        {% else %}
<link rel="stylesheet" href="{{ SITEURL }}/{{cssfile.strip()}}" />
        {% endif %}
    {% endfor %}
{% endif %}
{% if article.mathengine == 'mathjax' %}
    {% if MATH_JAX.hub_config %}
<script type="text/x-mathjax-config">MathJax.Hub.Config({{ MATH_JAX.hub_config|tojson }});</script>
    {% endif %}
<script type="text/javascript" async="async" src="{{ MATH_JAX.url }}"></script>
{% elif article.mathengine == 'katex-half' %}
<link rel="stylesheet" href="{{ KATEX.prefix }}/katex.min.css"{% if KATEX.style_integrity %} integrity="{{ KATEX.style_integrity }}"{% endif %} crossorigin="anonymous"{% if KATEX.defer_css %} media="print" onload="this.media='all'"{% endif %}/>
    {% if KATEX.preload_fonts %}{% for font in KATEX.preload_fonts %}
<link rel="preload" href="{{ KATEX.prefix }}/fonts/{{ font }}" as="font" type="font/woff2" crossorigin="anonymous" />
    {% endfor %}{% endif %}
<script defer src="{{ KATEX.prefix }}/katex.min.js"{% if KATEX.katex_js_integrity %} integrity="{{ KATEX.katex_js_integrity }}"{% endif %} crossorigin="anonymous"></script>
<script defer src="{{ KATEX.prefix }}/contrib/auto-render.min.js"{% if KATEX.auto_render_js_integrity %} integrity="{{ KATEX.auto_render_js_integrity }}"{% endif %} crossorigin="anonymous"></script>
<script>
window.addEventListener("load", function() {
renderMathInElement(document.getElementById('main'), {{ KATEX.options|tojson }});
});
</script>
{% endif %}
{% endblock %}

{% block content %}
<article id="content" class="body">
<h1 class="entry-title">{{ article.title }}</h1>
{% include 'post_details.html' %}

<div class="entry-content">
{{ article.content }}
</div>
</article>
{% endblock %}
